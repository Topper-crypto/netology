# Домашнее задание к занятию "5.3. Введение. Экосистема. Архитектура. Жизненный цикл Docker контейнера"
### Задача 1
> Сценарий выполения задачи:
> * создайте свой репозиторий на https://hub.docker.com;
> * выберете любой образ, который содержит веб-сервер Nginx;
> * создайте свой fork образа;
> * реализуйте функциональность: запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
```
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m DevOps Engineer!</h1>
</body>
</html>
```
> Опубликуйте созданный форк в своем репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.

### Решение:
Ссылка на репозиторий в докерхабе
```
https://hub.docker.com/repository/docker/topper80/netology
```

### Задача 2
> Посмотрите на сценарий ниже и ответьте на вопрос: "Подходит ли в этом сценарии использование Docker контейнеров или лучше подойдет виртуальная машина, физическая машина? Может быть возможны разные варианты?"
> 
> Детально опишите и обоснуйте свой выбор.
>
>  Сценарий:
> * Высоконагруженное монолитное java веб-приложение;
> * Nodejs веб-приложение;
> * Мобильное приложение c версиями для Android и iOS;
> * Шина данных на базе Apache Kafka;
> * Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana;
> * Мониторинг-стек на базе Prometheus и Grafana;
> * MongoDB, как основное хранилище данных для java-приложения;
> * Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry.

### Решение:
1. Высоконагруженное монолитное java веб-приложение - физический сервер, т.к. необходим физический доступ к ресурсам, нельзя реализовать в ВМ без изменения кода и без использования гипервизора ВМ
2. Nodejs веб-приложение - Docker, много однотипных приложений.
3. Мобильное приложение c версиями для Android и iOS - виртуальная машина, приложение в Docker не имеет GUI.
4. Шина данных на базе Apache Kafka - Docker, возможность запуска на различных узлах в сети.
5. Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana - Elasticsearvh на виртуальной машине, kibana и logstash на Docker, запуск нескольких приложений в рамках одной виртуальной машины.
6. Мониторинг-стек на базе Prometheus и Grafana - виртуальная машина, нет необходимости создавать контейнеры.
7. MongoDB, как основное хранилище данных для java-приложения - физическая машина, лучшее быстродействие с БД.
8. Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry - физический сервер или виртуальная машина, установить gitlab на сервере или ВМ можно только если у него 2 и более гб оперативной памяти. Если меньше, установщик сообщит об ошибке и прекратит работу.

### Задача 3
> * Запустите первый контейнер из образа centos c любым тэгом в фоновом режиме, подключив папку /data из текущей рабочей директории на хостовой машине в /data контейнера;
> * Запустите второй контейнер из образа debian в фоновом режиме, подключив папку /data из текущей рабочей директории на хостовой машине в /data контейнера;
> * Подключитесь к первому контейнеру с помощью docker exec и создайте текстовый файл любого содержания в /data;
> * Добавьте еще один файл в папку /data на хостовой машине;
> * Подключитесь во второй контейнер и отобразите листинг и содержание файлов в /data контейнера.
> 
### Решение
1. Запустите первый контейнер из образа centos c любым тэгом в фоновом режиме, подключив папку /data из текущей рабочей директории на хостовой машине в /data контейнера.

```
[topper@fedora ~]$ sudo docker run --name centos-01 -v /home/topper/data:/share/data -d centos sleep 99999
Unable to find image 'centos:latest' locally
latest: Pulling from library/centos
a1d0c7532777: Pull complete 
Digest: sha256:a27fd8080b517143cbbbab9dfb7c8571c40d67d534bbdee55bd6c473f432b177
Status: Downloaded newer image for centos:latest
1833e27ae7161569cbf5445687bb96b164aed6d90e5869c94156d02dd5abfdd7
```
2. Запустите второй контейнер из образа debian в фоновом режиме, подключив папку /data из текущей рабочей директории на хостовой машине в /data контейнера.
```
[topper@fedora ~]$ sudo docker run --name debian-01 -v /home/topper/data:/data -d debian sleep 99999
Unable to find image 'debian:latest' locally
latest: Pulling from library/debian
6aefca2dc61d: Pull complete 
Digest: sha256:6846593d7d8613e5dcc68c8f7d8b8e3179c7f3397b84a47c5b2ce989ef1075a0
Status: Downloaded newer image for debian:latest
338af1a6383d10727545fde23359375c49add332589ffc559416e56aa18042f0
```
3. Подключитесь к первому контейнеру с помощью docker exec и создайте текстовый файл любого содержания в /data.
```
[topper@fedora ~]$ sudo docker exec -ti centos-01 bash
[root@1833e27ae716 /]# echo "test file" > /share/data/file.test
```
4. Добавьте еще один файл в папку /data на хостовой машине.
```
[topper@fedora ~]$ echo "test file 1" > /home/topper/data/file1.test
```
5. Подключитесь во второй контейнер и отобразите листинг и содержание файлов в /data контейнера.
```
[topper@fedora ~]$ sudo docker exec -ti debian-01 bash
root@338af1a6383d:/# ls -la /data
total 8
drwxrwxrwx. 1 root root  38 May  9 19:26 .
drwxr-xr-x. 1 root root 160 May  9 19:23 ..
-rw-r--r--. 1 root root  10 May  9 19:25 file.test
-rw-r--r--. 1 1000 1000  12 May  9 19:26 file1.test
```

### Задача 4 (*)
> Воспроизвести практическую часть лекции самостоятельно.
> 
> Соберите Docker образ с Ansible, загрузите на Docker Hub и пришлите ссылку вместе с остальными ответами к задачам.
